# 该文件已由 i3-config-wizard（1）自动生成。
# 它不会被覆盖，因此可以根据需要进行编辑。
#
# 如果您需要一段时间更改键盘布局，请删除
# 此文件，然后重新运行 i3-config-wizard（1）。
#

# i3配置文件（v4）
#
# 请参阅 https://i3wm.org/docs/userguide.html 以获得完整参考！

set $mod Mod4

# 软件自启
exec --no-startup-id fcitx
exec --no-startup-id feh --bg-scale ~/.config/i3/hw.png

# 窗口标题的字体。除非在下面的 bar {} 块中使用了不同的字体，否则该栏也将使用该字体。
font pango:Ubuntu 8

# xss-lock，nm-applet 和 pactl 的组合是一个受欢迎的选择，因此此处以它们为例。根据需要进行修改。

# xss-lock 会获取已登录的挂起禁止锁定，并将在挂起之前使用 i3lock 锁定屏幕。使用 loginctl lock-session 锁定屏幕。
exec --no-startup-id xss-lock --transfer-sleep-lock -- i3lock --nofork -i ~/.config/i3/hw.png

# NetworkManager 是在 Linux 上管理无线网络的最流行方法，nm-applet 是它的与桌面环境无关的系统任务栏GUI。
exec --no-startup-id nm-applet

# 使用 pactl 调整 PulseAudio 中的音量。
set $refresh_i3status killall -SIGUSR1 i3status
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10% && $refresh_i3status
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10% && $refresh_i3status
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

# 使用 鼠标 + $mod 将浮动窗口拖动到所需位置
floating_modifier $mod

# 应用快捷键
bindsym $mod+Return exec --no-startup-id urxvt

bindsym $mod+Shift+f exec firefox

# 关闭焦点窗口
bindsym $mod+Shift+q kill

# 启动 dmenu（程序启动器）
bindsym $mod+d exec dmenu_run
# 还有一个（新的）i3-dmenu-desktop，它仅显示附带.desktop文件的应用程序。 它是dmenu的包装，因此您需要安装它。
# bindsym $mod+d exec --no-startup-id i3-dmenu-desktop

# 改变焦点
bindsym $mod+j focus left
bindsym $mod+k focus down
bindsym $mod+l focus up
bindsym $mod+semicolon focus right

# 改变焦点方案2
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# 移动焦点窗口
bindsym $mod+Shift+j move left
bindsym $mod+Shift+k move down
bindsym $mod+Shift+l move up
bindsym $mod+Shift+semicolon move right

# 移动焦点容器方案2
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# 水平分割
bindsym $mod+h split h

# 垂直分割
bindsym $mod+v split v

# 焦点容器进入全屏模式
bindsym $mod+f fullscreen toggle

# 更改容器布局（堆叠，选项卡式，切换拆分）
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# 切换平铺/浮动
bindsym $mod+Shift+space floating toggle

# 在平铺/浮动窗口之间切换焦点
bindsym $mod+space focus mode_toggle

# 聚焦父容器
bindsym $mod+a focus parent

# 聚焦子容器
#bindsym $mod+d focus child

# 定义默认工作区的名称，稍后我们将为其配置键绑定。
# 我们使用变量来避免在多个位置重复名称。
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $ws10 "10"

# 切换工作区
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# 将焦点容器移至工作区
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10

# 重新加载配置文件
bindsym $mod+Shift+c reload
# 在原位重新启动i3（保留您的布局/会话，可用于升级i3）
bindsym $mod+Shift+r restart

# 屏幕关闭 | 锁屏 | 关机（时间单位：秒）
exec --no-startup-id xset dpms 60 65

# 按下$mod+r进入'resize'模式
bindsym $mod+r mode "resize"
# 定义‘resize'模式
mode "resize" {
        # 当你进入'resize'模式时这些绑定会生效，同时之前的绑定都会失效
        # 左方向键缩小窗口宽度
        # 右方向键增大窗口宽度
        # 上方向键缩小窗口高度
        # 下方向键增大窗口高度
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt
        
        # 一样的功能，只是换了按键
        bindsym j resize shrink width 5 px or 5 ppt
        bindsym k resize grow height 5 px or 5 ppt
        bindsym l resize shrink height 5 px or 5 ppt
        bindsym semicolon resize grow width 5 px or 5 ppt

        # 退出'resize'模式，返回默认的模式
        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

# 电源管理
bindsym $mod+o mode "$mode_system"
set $mode_system 'j关机，i重启，g挂起，x休眠，s锁屏，d登出'
mode "$mode_system" {

    bindsym j exec --no-startup-id systemctl poweroff, mode "default"
    bindsym i exec --no-startup-id systemctl reboot, mode "default"
    bindsym g exec --no-startup-id i3lock -i ~/.config/i3/hw.png && systemctl suspend, mode "default"
    bindsym x exec --no-startup-id systemctl hibernate, mode "default"
    bindsym s exec --no-startup-id i3lock -i ~/.config/i3/hw.png, mode "default"
    bindsym d exec --no-startup-id i3-msg exit, mode "default"
    
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# 启动i3bar以显示工作区栏（加上i3status发现的系统信息，如果有的话）
bar {
        status_command i3status
}

